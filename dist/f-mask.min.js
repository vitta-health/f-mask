!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).VueFMask={})}(this,(function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function a(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=[];function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_";if(!u(e))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==e.indexOf(t))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\n"+"The placeholder character that was received is: ".concat(JSON.stringify(t),"\n\n")+"The mask that was received is: ".concat(JSON.stringify(e)));return e.map((function(e){return e instanceof RegExp?t:e})).join("")}function u(e){return Array.isArray&&Array.isArray(e)||e instanceof Array}function c(e){for(var t,n=[];-1!==(t=e.indexOf("[]"));)n.push(t),e.splice(t,1);return{maskWithoutCaretTraps:e,indexes:n}}var s,f=[];function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!u(n)){if("function"!==t(n))throw new Error("Text-mask:conformToMask; The mask property must be an array.");n=c(n=n(e,r)).maskWithoutCaretTraps}var i=r.guide,a=void 0===i||i,o=r.previousConformedValue,s=void 0===o?"":o,p=r.placeholderChar,v=void 0===p?"_":p,d=r.placeholder,h=void 0===d?l(n,v):d,g=r.currentCaretPosition,y=r.keepCharPositions,m=!1===a&&void 0!==s,b=e.length,O=s.length,w=h.length,k=n.length,j=b-O,x=j>0,P=g+(x?-j:0),E=P+Math.abs(j);if(!0===y&&!x){for(var T="",S=P;S<E;S++)h[S]===v&&(T+=v);e=e.slice(0,P)+T+e.slice(P,b)}for(var A=e.split("").map((function(e,t){return{char:e,isNew:t>=P&&t<E}})),C=b-1;C>=0;C--){var M=A[C].char;if(M!==v){var V=C>=P&&O===k;M===h[V?C-j:C]&&A.splice(C,1)}}var _="",N=!1;e:for(var U=0;U<w;U++){var D=h[U];if(D===v){if(A.length>0)for(;A.length>0;){var R=A.shift(),B=R.char,I=R.isNew;if(B===v&&!0!==m){_+=v;continue e}if(n[U].test(B)){if(!0===y&&!1!==I&&""!==s&&!1!==a&&x){for(var L=A.length,z=null,H=0;H<L;H++){var J=A[H];if(J.char!==v&&!1===J.isNew)break;if(J.char===v){z=H;break}}null!==z?(_+=B,A.splice(z,1)):U--}else _+=B;continue e}N=!0}!1===m&&(_+=h.substr(U,w));break}_+=D}if(m&&!1===x){for(var W=null,X=0;X<_.length;X++)h[X]===v&&(W=X);_=null!==W?_.substr(0,W+1):""}return{conformedValue:_,meta:{someCharsRejected:N}}}var v={__nextCharOptional__:!0},d=["#","A","N","X"],h=(n(s={},"#",/\d/),n(s,"A",/[a-z]/i),n(s,"N",/[a-z0-9]/i),n(s,"?",v),n(s,"&",{__backCharOptional__:!0}),n(s,"X",/./),s),g=function(e){return t=e.toString().replace(/.(\/)[gmiyus]{0,6}$/,(function(e){return e.replace("/","?/")})),n=t.lastIndexOf("/"),new RegExp(t.slice(1,n),t.slice(n+1));var t,n},y=function(e){return e instanceof RegExp?e:function(e){return new RegExp("/[".concat(function(e){return"[\\^$.|?*+()".indexOf(e)>-1?"\\".concat(e):e}(e),"]/"))}(e)};var m=function(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)},b=function(e){return e instanceof HTMLInputElement?e:e.querySelector("input")||e},O="undefined"!=typeof window&&window.navigator.userAgent.toLowerCase(),w=O&&O.indexOf("edge/")>0,k=O&&O.indexOf("android")>0,j=O&&/chrome\/\d+/.test(O)&&!w;var x=function(){var e=new Map,t={previousValue:"",mask:[],optional:null,initialBase:null,base:""};function n(n){return e.get(n)||i({},t)}return{partiallyUpdate:function(t,r){e.set(t,i({},n(t),{},r))},remove:function(t){e.delete(t)},get:n}}();function P(e){var t=m.bind(null,e,"input");k&&j?setTimeout(t,0):t()}function E(e,t){var n=x.get(e).optional,r=a(t.split("&").reverse()),i=r[0],o=r.slice(1);if(!n){var l=i.split("").filter((function(e){return d.includes(e)}));x.partiallyUpdate(e,{optional:o,initialBase:i,initialValidMaskChars:l})}var u=i.split("").map((function(e,t,n){var r=h[e]||e,i=n[t-1];return r===v?null:(h[i]||i)===v?g(y(r)):r})).filter(Boolean);return x.partiallyUpdate(e,{mask:u,base:i}),u}function T(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=x.get(e),r=n.previousValue,i=n.optional,a=n.initialBase,o=n.initialValidMaskChars,l=e.value,u=x.get(e),c=u.mask,s=l!==r,f=l.length>r.length,v=l.length<r.length,d=l&&s&&(f||v);if(t||d){var h=r?c.length:o.length;if(h<l.length&&i){var g=r?a.length:o.length,y=i.slice(0,l.length-g);c=E(e,"".concat(y.join("")).concat(a))}else if(v){var m=c.length-l.length,b=c.slice(m);if(!(b.length>=a.length))return null;c=b,x.partiallyUpdate(e,{mask:c})}var O=p(l,c,{guide:!1}),w=O.conformedValue;e.value=w,P(e)}return x.partiallyUpdate(e,{previousValue:l}),null}var S={bind:function(e,t){var n=t.value;e=b(e),n&&(E(e,n),T(e))},componentUpdated:function(e,t){var n=t.value,r=t.oldValue;e=b(e);var i=n!==r;n&&(i&&E(e,n),T(e,i))},unbind:function(e){e=b(e),x.remove(e)}},A=function(e){e.directive("mask",S)};e.VueMaskDirective=S,e.VueMaskPlugin=A,e.default=A,Object.defineProperty(e,"__esModule",{value:!0})}));
